import { collection, doc, getDoc, getDocs } from "firebase/firestore"; // Ensure you have these imports

const helperFunction = async (data) => {
  try {
    const dr = await getDocs(collection(firestore, data));
    console.log("dr", dr);
    dr.forEach((doc) => {
      console.log(`${doc.id} => ${doc.data().roomName}`);
    });
  } catch (error) {
    console.error("Error fetching documents:", error);
  }
};

const showData = async (userUID) => {
  try {
    console.log("called");
    const querySnapshot = await getDocs(collection(firestore, userUID));
    querySnapshot.forEach((doc) => {
      console.log(`${doc.id} => ${doc.data().currentRooms}`);
      helperFunction(doc.data().currentRooms);
    });
  } catch (error) {
    console.error("Error fetching user data:", error);
  }
};

const getDocumentData = async (collectionName, documentName) => {
  try {
    const docRef = doc(firestore, collectionName, documentName);
    const docSnap = await getDoc(docRef);

    if (docSnap.exists()) {
      console.log(`${docSnap.id} => ${docSnap.data()}`);
      return docSnap.data();
    } else {
      console.log("No such document!");
      return null;
    }
  } catch (error) {
    console.error("Error fetching document data:", error);
  }
};

// Fetch data from the document with collection name 'room' and document ID 'xyz'
getDocumentData('room', 'xyz').then(data => {
  if (data) {
    console.log('Document data:', data);
  }
});